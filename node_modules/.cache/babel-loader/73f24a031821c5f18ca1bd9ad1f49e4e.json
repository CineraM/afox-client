{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ciner\\\\Documents\\\\GitHub\\\\streaming-site-client\\\\src\\\\components\\\\logincontent\\\\Logincontent.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport \"./logincontent.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Logincontent() {\n  _s();\n\n  localStorage.setItem('LS_ID', '19'); // default anime page id\n\n  const token = localStorage.getItem('token');\n  const admin_token = localStorage.getItem('admin_token');\n  const [loading, setLoading] = useState(false);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  let navigate = useNavigate();\n\n  async function loginUser(event) {\n    setLoading(true);\n    event.preventDefault();\n    const response = await fetch('https://anifox-cinera.herokuapp.com/api/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    });\n    const data = await response.json();\n\n    if (data.admin_user) {\n      localStorage.setItem('admin_token', data.admin_user);\n      localStorage.setItem('user_name', 'Admin');\n      navigate('/admin_dashboard');\n    } else {\n      if (data.user) {\n        localStorage.setItem('token', data.user);\n        localStorage.setItem('user_name', data.name);\n        localStorage.setItem('user_email', data.email);\n        navigate('/home');\n      } else {\n        alert('Error: please try again');\n        setLoading(false);\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (admin_token) {\n      navigate('/admin_dashboard');\n    }\n\n    if (token) {\n      navigate('/home');\n    } // eslint-disable-next-line\n\n  }, []);\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loader\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: loginUser,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"https://i.imgur.com/C9YJkX6.png\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: email,\n              onChange: e => setEmail(e.target.value),\n              type: \"email\",\n              placeholder: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: password,\n              onChange: e => setPassword(e.target.value),\n              type: \"password\",\n              placeholder: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"signIn-btn\",\n              type: \"submit\",\n              children: \"Sign In\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Hello, Friend!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Give us your info so we can sell it! \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"signUp-btn\",\n            onClick: () => navigate(\"/register\"),\n            children: \" Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(Logincontent, \"z+yjBZLRwO8qQSdMOxS7a3PdLS4=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Logincontent;\n\nvar _c;\n\n$RefreshReg$(_c, \"Logincontent\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Logincontent","localStorage","setItem","token","getItem","admin_token","loading","setLoading","email","setEmail","password","setPassword","navigate","loginUser","event","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","admin_user","user","name","alert","e","target","value"],"sources":["C:/Users/Ciner/Documents/GitHub/streaming-site-client/src/components/logincontent/Logincontent.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport \"./logincontent.scss\"\r\n\r\nexport default function Logincontent() {\r\n\r\n    localStorage.setItem('LS_ID', '19')         // default anime page id\r\n    const token = localStorage.getItem('token')\r\n    const admin_token = localStorage.getItem('admin_token')\r\n    const [loading, setLoading] = useState(false)\r\n    const [email, setEmail] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n    let navigate = useNavigate()\r\n\r\n    async function loginUser(event) {\r\n        setLoading(true)\r\n\t\tevent.preventDefault()\r\n\r\n\t\tconst response = await fetch('https://anifox-cinera.herokuapp.com/api/login', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\temail,\r\n\t\t\t\tpassword,\r\n\t\t\t}),\r\n\t\t})\r\n\r\n\t\tconst data = await response.json()\r\n        if(data.admin_user)\r\n        {\r\n            localStorage.setItem('admin_token', data.admin_user)\r\n            localStorage.setItem('user_name', 'Admin')\r\n            navigate('/admin_dashboard')\r\n        }\r\n        else\r\n        {\r\n            if (data.user) {\r\n                localStorage.setItem('token', data.user)\r\n                localStorage.setItem('user_name', data.name)\r\n                localStorage.setItem('user_email', data.email)\r\n                navigate('/home')\r\n            } else {\r\n                alert('Error: please try again')\r\n                setLoading(false)\r\n            }\r\n        }\r\n\r\n\t}    \r\n\r\n    useEffect(() => {\r\n        if(admin_token)\r\n        {\r\n            navigate('/admin_dashboard')\r\n        }\r\n        if (token) {\r\n            navigate('/home')\r\n        }\r\n        // eslint-disable-next-line\r\n    },[])\r\n\r\n    if(loading)\r\n    {\r\n        return (\r\n            <div className='login-content'>\r\n                <div className=\"loader\"></div>\r\n            </div>\r\n          )\r\n    }\r\n    else\r\n    {\r\n        return (\r\n            <div className='login-content'>\r\n        \r\n                <div className=\"container\">\r\n                    <div className=\"left\">\r\n                        <form onSubmit={loginUser}>\r\n                            <img src=\"https://i.imgur.com/C9YJkX6.png\" alt=\"\" />\r\n                            <br />\r\n                            <input\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                type=\"email\"\r\n                                placeholder=\"Email\"\r\n                            />\r\n                            <input\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                type=\"password\"\r\n                                placeholder=\"Password\"\r\n                            />\r\n                            <button className='signIn-btn' type='submit'>Sign In</button>\r\n                        </form>\r\n                    </div>\r\n        \r\n                    <div className=\"right\">\r\n                        <h1>Hello, Friend!</h1>\r\n                        <p>Give us your info so we can sell it! </p>\r\n                        <button className=\"signUp-btn\" onClick={() => navigate(\"/register\")}> Sign Up</button>\r\n                    </div>\r\n                </div>\r\n        \r\n        \r\n            </div>\r\n          )\r\n    }\r\n\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}